name: tests

on:
  workflow_call:
    secrets:
      DOCKER_HUB_ACCESS_TOKEN:
        required: false
      DOCKER_HUB_USERNAME:
        required: false

  # Setting this enables manually triggering workflow in the GitHub UI
  # see https://docs.github.com/en/actions/managing-workflow-runs/manually-running-a-workflow
  workflow_dispatch: { }

permissions: read-all

jobs:
  build_civifom-dev:
    runs-on: ubuntu-latest
    steps:
      - run: 'echo "skipping"'

  run_junit_tests:
    needs:  [build_civifom-dev]
    runs-on: ubuntu-latest
    steps:
      - run: 'echo "skipping"'

  run_browser_tests:
    needs:  [build_civifom-dev]
    strategy:
      matrix:
        batch_number: [1, 2, 3, 4]
        include:
        - env: azure
          emulator: Localstack
        - env: aws
          emulator: Azurite
    runs-on: ubuntu-latest
    steps:
      - run: 'echo "skipping"'

  test_prod:
    runs-on: ubuntu-latest
    steps:
      - run: 'echo "skipping"'
